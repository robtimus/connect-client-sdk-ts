<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Worldline Connect client SDK</title><meta name="description" content="Documentation for Worldline Connect client SDK"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/search.js" id="tsd-search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Worldline Connect client SDK</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-content">
<div class="tsd-page-title">
<h2>Worldline Connect client SDK</h2></div>
<div class="tsd-panel tsd-typography"><a id="md:worldline-connect-client-sdk" class="tsd-anchor"></a><h1><a href="#md:worldline-connect-client-sdk">Worldline Connect client SDK</a></h1><p><a href="https://www.npmjs.com/package/@robtimus/connect-client-sdk"><img src="https://img.shields.io/npm/v/@robtimus/connect-client-sdk" alt="npm"></a>
<a href="https://github.com/robtimus/connect-client-sdk-ts/actions/workflows/build.yml"><img src="https://github.com/robtimus/connect-client-sdk-ts/actions/workflows/build.yml/badge.svg" alt="Build Status"></a>
<a href="https://sonarcloud.io/summary/overall?id=robtimus%3Aconnect-client-sdk"><img src="https://sonarcloud.io/api/project_badges/measure?project=robtimus%3Aconnect-client-sdk&metric=alert_status" alt="Quality Gate Status"></a>
<a href="https://sonarcloud.io/summary/overall?id=robtimus%3Aconnect-client-sdk"><img src="https://sonarcloud.io/api/project_badges/measure?project=robtimus%3Aconnect-client-sdk&metric=coverage" alt="Coverage"></a>
<a href="https://snyk.io/test/github/robtimus/connect-client-sdk-ts"><img src="https://snyk.io/test/github/robtimus/connect-client-sdk-ts/badge.svg" alt="Known Vulnerabilities"></a></p>
<p>An SDK for the <a href="https://epayments.developer-ingenico.com/">Worldline Connect</a> Client API. It&#39;s based on the <a href="https://github.com/Ingenico-ePayments/connect-sdk-client-js">official SDK</a>, but is mostly written from scratch, and provides some improvements:</p>
<ul>
<li>No hard requirement on browser specifics. Although this is the default, with only a little work it&#39;s possible to use the SDK in React Native apps.</li>
<li>No custom code for functionality most modern browsers support like Base64 encoding/decoding.</li>
<li>Proper promises.</li>
<li>HTTP calls use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> if available, with <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a> available as fallback.</li>
<li>Native cryptography if available, through the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API">Web Crypto API</a>. <a href="https://www.npmjs.com/package/node-forge">node-forge</a> can still be used as fallback.</li>
<li>No deprecated legacy code.</li>
<li>More support for creating Apple Pay and Google Pay payments.</li>
</ul>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><p>Install this SDK using your preferred Node.js package manager like <code>npm</code>, <code>yarn</code> or <code>pnpm</code>. For instance:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">i</span><span class="hl-1"> @</span><span class="hl-0">robtimus</span><span class="hl-1">/</span><span class="hl-0">connect</span><span class="hl-1">-</span><span class="hl-0">client</span><span class="hl-1">-</span><span class="hl-0">sdk</span>
</code><button>Copy</button></pre>
<a id="md:packaging" class="tsd-anchor"></a><h2><a href="#md:packaging">Packaging</a></h2><p>The SDK&#39;s default packaging is as separate ES modules. This can be used by most bundlers, but also in non-browser environments.
The default export contains the most important types:</p>
<pre><code class="language-typescript"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">PaymentContext</span><span class="hl-1">, </span><span class="hl-0">PaymentRequest</span><span class="hl-1">, </span><span class="hl-0">Session</span><span class="hl-1">, </span><span class="hl-0">SessionDetails</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@robtimus/connect-client-sdk&quot;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<a id="md:usage-universal-module-definition-umd" class="tsd-anchor"></a><h3><a href="#md:usage-universal-module-definition-umd">Usage Universal Module Definition (UMD)</a></h3><p>The SDK is available under global namespace <code>connectClientSdk</code>, and can be imported in the following way:</p>
<pre><code class="language-html"><span class="hl-4">&lt;!</span><span class="hl-5">DOCTYPE</span><span class="hl-1"> </span><span class="hl-6">html</span><span class="hl-4">&gt;</span><br/><span class="hl-4">&lt;</span><span class="hl-5">html</span><span class="hl-1"> </span><span class="hl-6">lang</span><span class="hl-1">=</span><span class="hl-7">&quot;en&quot;</span><span class="hl-4">&gt;</span><br/><span class="hl-1">  </span><span class="hl-4">&lt;</span><span class="hl-5">head</span><span class="hl-4">&gt;</span><br/><span class="hl-1">    ...</span><br/><span class="hl-1">    </span><span class="hl-4">&lt;</span><span class="hl-5">script</span><span class="hl-8"> </span><span class="hl-6">src</span><span class="hl-8">=</span><span class="hl-7">&quot;./node_modules/@robtimus/connect-client-sdk/dist/connect-client-sdk.umd.js&quot;</span><span class="hl-4">&gt;&lt;/</span><span class="hl-5">script</span><span class="hl-4">&gt;</span><br/><span class="hl-1">  </span><span class="hl-4">&lt;/</span><span class="hl-5">head</span><span class="hl-4">&gt;</span><br/><span class="hl-1">  </span><span class="hl-4">&lt;</span><span class="hl-5">body</span><span class="hl-4">&gt;</span><br/><span class="hl-1">    </span><span class="hl-4">&lt;</span><span class="hl-5">script</span><span class="hl-4">&gt;</span><br/><span class="hl-8">      </span><span class="hl-9">const</span><span class="hl-8"> </span><span class="hl-10">session</span><span class="hl-8"> </span><span class="hl-1">=</span><span class="hl-8"> </span><span class="hl-9">new</span><span class="hl-8"> </span><span class="hl-0">connectClientSdk</span><span class="hl-8">.</span><span class="hl-11">Session</span><span class="hl-8">({</span><br/><span class="hl-8">        </span><span class="hl-1">...</span><br/><span class="hl-8">      }, {</span><br/><span class="hl-8">        </span><span class="hl-1">...</span><br/><span class="hl-8">      })</span><br/><span class="hl-8">    </span><span class="hl-4">&lt;/</span><span class="hl-5">script</span><span class="hl-4">&gt;</span><br/><span class="hl-1">  </span><span class="hl-4">&lt;/</span><span class="hl-5">body</span><span class="hl-4">&gt;</span><br/><span class="hl-4">&lt;/</span><span class="hl-5">html</span><span class="hl-4">&gt;</span>
</code><button>Copy</button></pre>
<a id="md:getting-started" class="tsd-anchor"></a><h2><a href="#md:getting-started">Getting started</a></h2><ol>
<li><p>Use the Worldline Connect Server APi&#39;s <a href="https://apireference.connect.worldline-solutions.com/s2sapi/v1/en_US/json/sessions/create.html">Create session</a> call to create a session.</p>
</li>
<li><p>Create a <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.SessionDetails.html">SessionDetails</a> object using the Create session response:</p>
</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">sessionDetails</span><span class="hl-1">: </span><span class="hl-12">SessionDetails</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">assetUrl:</span><span class="hl-1"> </span><span class="hl-3">&quot;https://payment.pay1.secured-by-ingenico.com/&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">clientApiUrl:</span><span class="hl-1"> </span><span class="hl-3">&quot;https://eu.api-ingenico.com/client&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">clientSessionId:</span><span class="hl-1"> </span><span class="hl-3">&quot;f084372052fb47d9a766ec35bfa0e6bd&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">customerId:</span><span class="hl-1"> </span><span class="hl-3">&quot;9991-0b67467b30df4c6d8649c8adc568fd0f&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<blockquote>
<p>In JavaScript, the session response can be used as-is. In TypeScript you need to either remove the <code>invalidTokens</code> and <code>region</code> properties (if present), or cast the response to <code>SessionDetails</code>.</p>
</blockquote>
<ol start="3">
<li>Create a <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.PaymentContext.html">PaymentContext</a> object with the necessary values (more properties can be added as necessary):</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentContext</span><span class="hl-1">: </span><span class="hl-12">PaymentContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">amountOfMoney:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">amount:</span><span class="hl-1"> </span><span class="hl-13">1000</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">currencyCode:</span><span class="hl-1"> </span><span class="hl-3">&quot;EUR&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">countryCode:</span><span class="hl-1"> </span><span class="hl-3">&quot;NL&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<ol start="4">
<li>Create a <a href="https://robtimus.github.io/connect-client-sdk-ts/classes/Session.Session.html">Session</a> object with the created <code>SessionDetails</code> and <code>PaymentContext</code> objects:</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">session</span><span class="hl-1"> = </span><span class="hl-9">new</span><span class="hl-1"> </span><span class="hl-11">Session</span><span class="hl-1">(</span><span class="hl-0">sessionDetails</span><span class="hl-1">, </span><span class="hl-0">paymentContext</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<blockquote>
<p>Unlike the official SDK, this SDK requires the payment context to be specified up front. It can be updated using <code>session.updatePaymentContext</code>. This accepts a partial <code>PaymentContext</code> that will be merged into the session&#39;s payment context. This allows you to only specify the changes you want to make.</p>
</blockquote>
<ol start="5">
<li>Use the <code>Session</code> object to retrieve the available payment products, payment product groups, and their accounts on file. Display these, and let your customer select one:</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentItems</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">getBasicPaymentItems</span><span class="hl-1">();</span><br/><span class="hl-14">// Display the contents of paymentItems.paymentItems (the payment products and payment product groups)</span><br/><span class="hl-14">// and paymentItems.accountsOnFile</span>
</code><button>Copy</button></pre>
<ol start="6">
<li>When a payment product or payment product group is selected, use the <code>Session</code> object to retrieve more information about the payment product or payment product group. This contains the fields for the product. Display these fields and let your customer fill them in:</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentProduct</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">getPaymentProduct</span><span class="hl-1">(</span><span class="hl-13">1</span><span class="hl-1">);</span><br/><span class="hl-14">// or const paymentProductGroup = await session.getPaymentProductGroup(&quot;cards&quot;);</span><br/><span class="hl-14">// Display the contents of paymentProduct.fields or paymentProductGroup.fields</span>
</code><button>Copy</button></pre>
<ol start="7">
<li>Create an instance of <a href="https://robtimus.github.io/connect-client-sdk-ts/classes/model.PaymentRequest.html">PaymentRequest</a>, set its payment product, and store the value entered for each field:</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentRequest</span><span class="hl-1"> = </span><span class="hl-9">new</span><span class="hl-1"> </span><span class="hl-11">PaymentRequest</span><span class="hl-1">();</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setPaymentProduct</span><span class="hl-1">(</span><span class="hl-0">paymentProduct</span><span class="hl-1">);</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;cardNumber&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;4567 3500 0042 7977&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;cvv&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;123&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;expiryDate&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;12/99&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;cardholderName&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;Wile E. Coyote&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<blockquote>
<p>The values can be masked (as shown above), as long as the mask matches the field&#39;s mask. The SDK will automatically remove these masks when needed.</p>
</blockquote>
<ol start="8">
<li>Validate the <code>PaymentRequest</code> object:</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">result</span><span class="hl-1"> = </span><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">validate</span><span class="hl-1">();</span><br/><span class="hl-2">if</span><span class="hl-1"> (!</span><span class="hl-0">result</span><span class="hl-1">.</span><span class="hl-0">valid</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-14">// result.errors contains each validation error, e.g. { fieldId: &quot;cardNumber&quot;, ruleId: &quot;luhn&quot; }</span><br/><span class="hl-1">  </span><span class="hl-14">// or { fieldId: &quot;cvv&quot;, ruleId: &quot;required&quot; }</span><br/><span class="hl-1">  </span><span class="hl-14">// These can be be used to display error messages to your customer</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<ol start="9">
<li>Encrypt the contents of the <code>PaymentRequest</code> object:</li>
</ol>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">encryptor</span><span class="hl-1"> = </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">getEncryptor</span><span class="hl-1">();</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">payload</span><span class="hl-1"> = </span><span class="hl-0">encryptor</span><span class="hl-1">.</span><span class="hl-11">encrypt</span><span class="hl-1">(</span><span class="hl-0">paymentRequest</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<ol start="10">
<li>Send the payload to your server, where it can be used for the <code>encryptedCustomerInput</code> property of a <a href="https://apireference.connect.worldline-solutions.com/s2sapi/v1/en_US/json/payments/create.html">Create payment</a> call.</li>
</ol>
<a id="md:extended-usage" class="tsd-anchor"></a><h2><a href="#md:extended-usage">Extended usage</a></h2><a id="md:iin-details" class="tsd-anchor"></a><h3><a href="#md:iin-details">IIN details</a></h3><p>When using the <code>cards</code> payment product group, it&#39;s important to know which payment product a card belongs to. This can be done by retrieving the <a href="https://apireference.connect.worldline-solutions.com/c2sapi/v1/en_US/json/services/getIINdetails.html">IIN details</a>, and checking the status property:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">iinDetails</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">getIINDetails</span><span class="hl-1">(</span><span class="hl-3">&quot;4567 35&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">switch</span><span class="hl-1"> (</span><span class="hl-0">iinDetails</span><span class="hl-1">.</span><span class="hl-0">status</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-3">&quot;SUPPORTED&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-14">// The card is known and allowed within the current payment context.</span><br/><span class="hl-1">    </span><span class="hl-14">// iinDetails.isAllowedInContext is true, iinDetails.paymentProductId and iinDetails.countryCode</span><br/><span class="hl-1">    </span><span class="hl-14">// are available.</span><br/><span class="hl-1">    </span><span class="hl-14">// If the card has multiple brands, iinDetails.coBrands contains the paymentProductId for each of them,</span><br/><span class="hl-1">    </span><span class="hl-14">// and an isAllowedInContext flag that determines whether or not the co-brand is allowed for the</span><br/><span class="hl-1">    </span><span class="hl-14">// current context.</span><br/><span class="hl-1">    </span><span class="hl-14">// To render the brands, session.getPaymentProductDisplayHints can be called with the paymentProductId</span><br/><span class="hl-1">    </span><span class="hl-14">// field of each support cobrand for which isAllowedInContext is true.</span><br/><span class="hl-1">    </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-3">&quot;NOT_ALLOWED&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-14">// The card is known but not allowed within the current payment context.</span><br/><span class="hl-1">    </span><span class="hl-14">// Like SUPPORTED, but iinDetails.isAllowedInContext is false.</span><br/><span class="hl-1">    </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-3">&quot;NOT_ENOUGH_DIGITS&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-14">// Fewever than 6 digits were provided. No additional properties are available.</span><br/><span class="hl-1">    </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-3">&quot;UNKNOWN&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-14">// The card is not known.</span><br/><span class="hl-1">    </span><span class="hl-14">// iinDetails.errorId and iinDetails.errors come from the Worldline Connect Client API error response.</span><br/><span class="hl-1">    </span><span class="hl-2">break</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:payment-product-specifics" class="tsd-anchor"></a><h3><a href="#md:payment-product-specifics">Payment product specifics</a></h3><a id="md:apple-pay" class="tsd-anchor"></a><h4><a href="#md:apple-pay">Apple Pay</a></h4><p>if Apple Pay (302) is one of your available payment products, you need to provide some more information in the <code>PaymentContext</code> to be able to use it:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentContext</span><span class="hl-1">: </span><span class="hl-12">PaymentContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  ...</span><br/><span class="hl-1">  </span><span class="hl-0">paymentProductSpecificInputs</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-0">applePay:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">merchantName:</span><span class="hl-1"> </span><span class="hl-3">&quot;Your name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">merchantCountryCode:</span><span class="hl-1"> </span><span class="hl-3">&quot;Your optional 2-letter ISO country code;</span><span class="hl-15">\</span><br/><span class="hl-3">                            the acquirer country as returned by the Worldline Connect Client API</span><span class="hl-15">\</span><br/><span class="hl-3">                            will be used if available, otherwise this value if specified,</span><span class="hl-15">\</span><br/><span class="hl-3">                            otherwise the country code from the payment context&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">lineItem:</span><span class="hl-1"> </span><span class="hl-3">&quot;Optional line item; if not set the merchant name will be used&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<p>You can then use the following code to set a <code>PaymentRequest</code>&#39;s value for Apple Pay&#39;s <code>encryptedPaymentData</code> field:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">applePayProduct</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">getPaymentProduct</span><span class="hl-1">(</span><span class="hl-13">302</span><span class="hl-1">);</span><br/><span class="hl-14">// or const applePayProduct = paymentProducts.getPaymentProduct(302);</span><br/><span class="hl-14">// or const applePayProduct = paymentItems.getPaymentItem(302);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">applePayHelper</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">ApplePay</span><span class="hl-1">(</span><span class="hl-0">applePayProduct</span><span class="hl-1">);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentData</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">applePayHelper</span><span class="hl-1">.</span><span class="hl-11">createPayment</span><span class="hl-1">();</span><br/><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;encryptedPaymentData&quot;</span><span class="hl-1">, </span><span class="hl-10">JSON</span><span class="hl-1">.</span><span class="hl-11">stringify</span><span class="hl-1">(</span><span class="hl-0">paymentData</span><span class="hl-1">.</span><span class="hl-0">paymentData</span><span class="hl-1">));</span>
</code><button>Copy</button></pre>
<blockquote>
<p>If the browser does not support Apple Pay, the SDK will filter it out of the available payment products.</p>
</blockquote>
<a id="md:google-pay" class="tsd-anchor"></a><h4><a href="#md:google-pay">Google Pay</a></h4><p>If Google Pay (320) is one of your available payment products, you need to provide some more information in the <code>PaymentContext</code> to be able to use it:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentContext</span><span class="hl-1">: </span><span class="hl-12">PaymentContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  ...</span><br/><span class="hl-1">  </span><span class="hl-0">paymentProductSpecificInputs</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-0">googlePay:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">connectMerchantId:</span><span class="hl-1"> </span><span class="hl-3">&quot;Your Connect merchant id&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">googlePayMerchantId:</span><span class="hl-1"> </span><span class="hl-3">&quot;Your Google Pay merchant id&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">transactionCountryCode:</span><span class="hl-1"> </span><span class="hl-3">&quot;ISO 3166-1 alpha-2 country code for the country where the transaction</span><span class="hl-15">\</span><br/><span class="hl-3">                               will be completed/processed;</span><span class="hl-15">\</span><br/><span class="hl-3">                               the acquirer country as returned by the Worldline Connect Client API</span><span class="hl-15">\</span><br/><span class="hl-3">                               will be used if available, otherwise this value if specified,</span><span class="hl-15">\</span><br/><span class="hl-3">                               otherwise the country code from the payment context&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">merchantName:</span><span class="hl-1"> </span><span class="hl-3">&quot;Your optional user visible merchant name; if not set the Business name in your</span><span class="hl-15">\</span><br/><span class="hl-3">                     Google Pay Developer Profile will be used&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">environment:</span><span class="hl-1"> </span><span class="hl-3">&quot;PRODUCTION&quot;</span><span class="hl-1">, </span><span class="hl-14">// or &quot;TEST&quot; for test purposes</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<p>You can then use the following code to set a <code>PaymentRequest</code>&#39;s value for Google Pay&#39;s <code>encryptedPaymentData</code> field:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">googlePayProduct</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">getPaymentProduct</span><span class="hl-1">(</span><span class="hl-13">320</span><span class="hl-1">);</span><br/><span class="hl-14">// or const googlePayProduct = paymentProducts.getPaymentProduct(320);</span><br/><span class="hl-14">// or const googlePayProduct = paymentItems.getPaymentItem(320);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">googlePayHelper</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">GooglePay</span><span class="hl-1">(</span><span class="hl-0">googlePayProduct</span><span class="hl-1">);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentData</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">googlePayHelper</span><span class="hl-1">.</span><span class="hl-11">createPayment</span><span class="hl-1">();</span><br/><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;encryptedPaymentData&quot;</span><span class="hl-1">, </span><span class="hl-0">paymentData</span><span class="hl-1">.</span><span class="hl-0">paymentMethodData</span><span class="hl-1">.</span><span class="hl-0">tokenizationData</span><span class="hl-1">.</span><span class="hl-0">token</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<blockquote>
<p>The <code>googlePayHelper</code> can be used before initializing the payment for two purposes:</p>
<ol>
<li><code>googlePayHelper.prefetchPaymentData()</code> prefetches configuration to improve <code>createPayment</code> execution time on later user interaction.</li>
<li><code>googlePayHelper.createButton({ ... })</code> creates a button that you can add to your page (see <a href="https://developers.google.com/pay/api/web/guides/tutorial#add-button">https://developers.google.com/pay/api/web/guides/tutorial#add-button</a>). Note that the <code>allowedPaymentMethods</code> will be set for you, you only need to provide the <code>onClick</code> handler and display properties.</li>
</ol>
</blockquote>
<blockquote>
<p>You need to load an additional JavaScript file (see <a href="https://developers.google.com/pay/api/web/guides/tutorial#js-load">https://developers.google.com/pay/api/web/guides/tutorial#js-load</a>). If you don&#39;t, the SDK will filter Google Pay out of the available payment products.</p>
</blockquote>
<a id="md:bancontact" class="tsd-anchor"></a><h4><a href="#md:bancontact">Bancontact</a></h4><p>By default, retrieving the Bancontact (3012) product will not return the fields of the basic flow. You can force these fields to be returned by providing some more information in the <code>PaymentContext</code>:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentContext</span><span class="hl-1">: </span><span class="hl-12">PaymentContext</span><span class="hl-1"> = {</span><br/><span class="hl-1">  ...</span><br/><span class="hl-1">  </span><span class="hl-0">paymentProductSpecificInputs</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-0">bancontact:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">forceBasicFlow:</span><span class="hl-1"> </span><span class="hl-9">true</span><span class="hl-1">,</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<p>See the details of the <code>forceBasicFlow</code> query parameter of the <a href="https://apireference.connect.worldline-solutions.com/c2sapi/v1/en_US/javascript/products/get.html">Get payment product</a> call for more information.</p>
<a id="md:masking-field-values" class="tsd-anchor"></a><h3><a href="#md:masking-field-values">Masking field values</a></h3><p>To help in formatting field values like credit cards or expiry dates, <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.PaymentProductField.html">PaymentProductField</a> provides functions <code>applyMask</code>, <code>applyWildcardMask</code> and <code>removeMask</code> to apply and remove masks. For example:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">cardNumberField</span><span class="hl-1"> = </span><span class="hl-0">paymentProduct</span><span class="hl-1">.</span><span class="hl-11">getField</span><span class="hl-1">(</span><span class="hl-3">&quot;cardNumber&quot;</span><span class="hl-1">);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">value</span><span class="hl-1"> = </span><span class="hl-3">&quot;4567350000427977&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">maskedValue</span><span class="hl-1"> = </span><span class="hl-0">cardNumberField</span><span class="hl-1">.</span><span class="hl-11">applyMask</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">).</span><span class="hl-0">formattedValue</span><span class="hl-1">; </span><span class="hl-14">// 4567 3500 0042 7977</span><br/><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">unmaskedValue</span><span class="hl-1"> = </span><span class="hl-0">cardNumberField</span><span class="hl-1">.</span><span class="hl-11">removeMask</span><span class="hl-1">(</span><span class="hl-0">maskedValue</span><span class="hl-1">); </span><span class="hl-14">// 4567350000427977</span>
</code><button>Copy</button></pre>
<a id="md:accounts-on-file-tokens" class="tsd-anchor"></a><h3><a href="#md:accounts-on-file-tokens">Accounts on file (tokens)</a></h3><p>Accounts on file are available from instances of <a href="https://robtimus.github.io/connect-client-sdk-ts/types/model.BasicPaymentItem.html">BasicPaymentItem</a> / <a href="https://robtimus.github.io/connect-client-sdk-ts/types/model.PaymentItem.html">PaymentItem</a>, <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.BasicPaymentProduct.html">BasicPaymentProduct</a> / <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.PaymentProduct.html">PaymentProduct</a> and <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.BasicPaymentProductGroup.html">BasicPaymentProductGroup</a> / <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.PaymentProductGroup.html">PaymentProductGroup</a>. They are also available from instances of <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.BasicPaymentItems.html">BasicPaymentItems</a>, <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.BasicPaymentProducts.html">BasicPaymentProducts</a> and <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.BasicPaymentProductGroups.html">BasicPaymentProductGroups</a>; these contain the accounts on file of each of their elements.</p>
<p>An account on file can be rendered in the list of available accounts on file using the label template elements of its display hints in combination with the account on file attributes:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">accountOnFile</span><span class="hl-1"> = ...;</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">displayValue</span><span class="hl-1"> = </span><span class="hl-0">accountOnFile</span><span class="hl-1">.</span><span class="hl-0">displayHints</span><span class="hl-1">.</span><span class="hl-0">labelTemplate</span><br/><span class="hl-1">  .</span><span class="hl-11">map</span><span class="hl-1">((</span><span class="hl-0">e</span><span class="hl-1">) </span><span class="hl-9">=&gt;</span><span class="hl-1"> </span><span class="hl-0">accountOnFile</span><span class="hl-1">.</span><span class="hl-11">getAttributeDisplayValue</span><span class="hl-1">(</span><span class="hl-0">e</span><span class="hl-1">.</span><span class="hl-0">attributeKey</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-11">join</span><span class="hl-1">(</span><span class="hl-3">&quot; &quot;</span><span class="hl-1">);</span><br/><span class="hl-14">// or equivalent:</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">label</span><span class="hl-1"> = </span><span class="hl-0">accountOnFile</span><span class="hl-1">.</span><span class="hl-11">getLabel</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>To render an account on file&#39;s detail page, fetch its matching payment product and display it mostly as usual. However, some fields should not be editable. <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/model.AccountOnFile.html">AccountOnFile</a> has method <code>isReadOnlyAttribute</code> that can be used. For instance:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentProduct</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">getPaymentProduct</span><span class="hl-1">(</span><span class="hl-0">accountOnFile</span><span class="hl-1">.</span><span class="hl-0">paymentProductId</span><span class="hl-1">);</span><br/><span class="hl-2">for</span><span class="hl-1"> (</span><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">field</span><span class="hl-1"> </span><span class="hl-9">of</span><span class="hl-1"> </span><span class="hl-0">paymentProduct</span><span class="hl-1">.</span><span class="hl-0">fields</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">accountOnFile</span><span class="hl-1">.</span><span class="hl-11">isReadOnlyAttribute</span><span class="hl-1">(</span><span class="hl-0">field</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-14">// render accountOnFile.getAttributeDisplayValue(field.id) as text or a disabled input element</span><br/><span class="hl-1">  } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">attribute</span><span class="hl-1"> = </span><span class="hl-0">accountOnFile</span><span class="hl-1">.</span><span class="hl-11">findAttribute</span><span class="hl-1">(</span><span class="hl-0">field</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">attribute</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-14">// render field with attribute.value as initial value</span><br/><span class="hl-1">    } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-14">// render field as usual</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>When creating a <code>PaymentRequest</code>, make sure to set not only the payment product but also the account on file:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">paymentRequest</span><span class="hl-1"> = </span><span class="hl-9">new</span><span class="hl-1"> </span><span class="hl-11">PaymentRequest</span><span class="hl-1">();</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setPaymentProduct</span><span class="hl-1">(</span><span class="hl-0">paymentProduct</span><span class="hl-1">);</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setAccountOnFile</span><span class="hl-1">(</span><span class="hl-0">accountOnFile</span><span class="hl-1">);</span><br/><span class="hl-14">// Read-only fields like the cardNumber should not be set</span><br/><span class="hl-14">// The cvv is usually not stored in an account on file</span><br/><span class="hl-14">// The expiryDate is usually editable because it changes every time a new card is issued</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;cvv&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;123&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">paymentRequest</span><span class="hl-1">.</span><span class="hl-11">setValue</span><span class="hl-1">(</span><span class="hl-3">&quot;expiryDate&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;12/99&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:server-side-rendering-support" class="tsd-anchor"></a><h3><a href="#md:server-side-rendering-support">Server-side rendering support</a></h3><p>In case you perform server-side rendering, and the payment product or payment product group is already available, it&#39;s possible to set this on a <code>Session</code> object:</p>
<pre><code class="language-typescript"><span class="hl-0">session</span><span class="hl-1">.</span><span class="hl-11">setProvidedPaymentItem</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-13">1</span><span class="hl-1">,</span><br/><span class="hl-1">  ...</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>Whenever this payment product or payment product group is retrieved, the Worldline Connect Client API will not be queried, but the provided value will be returned instead.</p>
<blockquote>
<p>The value should be provided as returned by the Worldline Connect Client API or the Worldline Connect Server API. The SDK will convert this as necessary.</p>
</blockquote>
<a id="md:non-browser-support" class="tsd-anchor"></a><h3><a href="#md:non-browser-support">Non-browser support</a></h3><p>The official SDK cannot be used outside of browsers, because it relies on browser mechanics like <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a> and <code>window</code>.<br>By default this SDK also doesn&#39;t work outside of browsers. However, it&#39;s possible to replace the browser specifics with a custom implementation of <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/ext.Device.html">Device</a>. This consists of:</p>
<ul>
<li>An <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/ext_http.HttpClient.html">HttpClient</a>. <a href="https://robtimus.github.io/connect-client-sdk-ts/variables/ext_impl_http_fetch.fetchHttpClient.html">fetchHttpClient</a> can be used, or a custom implementation can be created.</li>
<li><a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/ext.DeviceInformation.html">DeviceInformation</a> that describes some device-specifics. This is used for metadata that&#39;s sent to the Worldline Connect Client API, as well as encrypted customer input.</li>
<li>Optionally, an <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/ext.ApplePayClient.html">ApplePayClient</a> and <a href="https://robtimus.github.io/connect-client-sdk-ts/interfaces/ext.GooglePayClient.html">GooglePayClient</a>. If either one is not available, the matching payment product will be filtered out.</li>
</ul>
<p>When you&#39;ve created a custom <code>Device</code>, provide it when creating a <code>Session</code> object:</p>
<pre><code class="language-typescript"><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">device</span><span class="hl-1"> = ...;</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">session</span><span class="hl-1"> = </span><span class="hl-9">new</span><span class="hl-1"> </span><span class="hl-11">Session</span><span class="hl-1">(</span><span class="hl-0">sessionDetails</span><span class="hl-1">, </span><span class="hl-0">paymentContext</span><span class="hl-1">, </span><span class="hl-0">device</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:api" class="tsd-anchor"></a><h2><a href="#md:api">API</a></h2><p>The API can be found <a href="https://robtimus.github.io/connect-client-sdk-ts/modules/index.html">here</a>.</p>
<a id="md:differences-from-the-worldline-connect-client-api" class="tsd-anchor"></a><h3><a href="#md:differences-from-the-worldline-connect-client-api"><a href="https://github.com/robtimus/connect-client-sdk-ts/wiki/Differences-from-the-Worldline-Connect-Client-API">Differences from the Worldline Connect Client API</a></a></h3><a id="md:requirements" class="tsd-anchor"></a><h2><a href="#md:requirements">Requirements</a></h2><a id="md:browsers" class="tsd-anchor"></a><h3><a href="#md:browsers">Browsers</a></h3><p>The following are the minimum supported browsers:</p>
<table>
<thead>
<tr>
<th>Browser</th>
<th>Min version</th>
</tr>
</thead>
<tbody><tr>
<td>Chrome</td>
<td>74+</td>
</tr>
<tr>
<td>Edge</td>
<td>79+</td>
</tr>
<tr>
<td>Safari</td>
<td>14.1+</td>
</tr>
<tr>
<td>Firefox</td>
<td>90+</td>
</tr>
<tr>
<td>Opera</td>
<td>62+</td>
</tr>
<tr>
<td>Chrome for Android</td>
<td>113+</td>
</tr>
<tr>
<td>Safari on iOS</td>
<td>14.5+</td>
</tr>
<tr>
<td>Opera Mobile</td>
<td>73+</td>
</tr>
<tr>
<td>Android Browser</td>
<td>113+</td>
</tr>
<tr>
<td>Firefox for Android</td>
<td>113+</td>
</tr>
</tbody></table>
<p>Internet Explorer and older versions of these browser can become supported by using a polyfill like <a href="https://www.npmjs.com/package/core-js">core-js</a>.</p>
<p>If the Web Crypto API is not available, it&#39;s possible to use <a href="https://www.npmjs.com/package/node-forge">node-forge</a> instead. For instance:</p>
<pre><code class="language-typescript"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">forgeCryptoEngine</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@robtimus/connect-client-sdk/dist/ext/impl/crypto/forge&quot;</span><span class="hl-1">;</span><br/><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">webCryptoCryptoEngine</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@robtimus/connect-client-sdk/dist/ext/impl/crypto/WebCrypto&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">Session</span><span class="hl-1">.</span><span class="hl-0">defaultCryptoEngine</span><span class="hl-1"> = </span><span class="hl-0">webCryptoCryptoEngine</span><span class="hl-1"> ?? </span><span class="hl-0">forgeCryptoEngine</span><span class="hl-1">;</span><br/><br/><span class="hl-14">// create session as usual</span>
</code><button>Copy</button></pre>
<p>When using UMD, this is done automatically when using <code>connect-client-sdk.forge.umd.js</code> instead of <code>connect-client-sdk.umd.js</code>:</p>
<pre><code class="language-html"><span class="hl-4">&lt;</span><span class="hl-5">script</span><span class="hl-8"> </span><span class="hl-6">src</span><span class="hl-8">=</span><span class="hl-7">&quot;./node_modules/@robtimus/connect-client-sdk/dist/connect-client-sdk.forge.umd.js&quot;</span><span class="hl-4">&gt;&lt;/</span><span class="hl-5">script</span><span class="hl-4">&gt;</span>
</code><button>Copy</button></pre>
<a id="md:nodejs" class="tsd-anchor"></a><h3><a href="#md:nodejs">Node.js</a></h3><p>Node.js 16 or higher is required.</p>
<a id="md:building-the-repository" class="tsd-anchor"></a><h2><a href="#md:building-the-repository">Building the repository</a></h2><p>From the root of the project install all dependencies, then compile the code:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">ci</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">build</span><br/><span class="hl-1"># </span><span class="hl-16">optional</span><span class="hl-1">:</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">typedoc</span>
</code><button>Copy</button></pre>
<a id="md:testing" class="tsd-anchor"></a><h2><a href="#md:testing">Testing</a></h2><p>There are three types of tests:</p>
<ol>
<li><p>Unit tests. These will work out-of-the-box.<br>Run these tests as follows:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">test</span>
</code><button>Copy</button></pre>
</li>
<li><p>Integration tests. Before you can run these, you first need to copy file <code>test/config.json.dist</code> to <code>test/config.json</code> and replace all values as needed.<br>Run these tests as follows:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-16">test</span><span class="hl-1">:</span><span class="hl-0">integration</span>
</code><button>Copy</button></pre>
</li>
<li><p>Selenium (in-browser) tests. Before you can run these, you first need to copy file <code>test/config.json.dist</code> to <code>test/config.json</code> and replace all values as needed.<br>Run these tests as follows:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-16">test</span><span class="hl-1">:</span><span class="hl-0">selenium</span>
</code><button>Copy</button></pre>
</li>
</ol>
<p>You can also run all these types of tests together as follows:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-16">test</span><span class="hl-1">:</span><span class="hl-0">all</span>
</code><button>Copy</button></pre>
</div></div>
<div class="col-sidebar">
<div class="page-menu">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)" id="icon-chevronDown"></path></svg>Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg>On This Page</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li>
<ul>
<li><a href="#md:worldline-connect-client-sdk"><span>Worldline <wbr/>Connect client SDK</span></a></li>
<li>
<ul>
<li><a href="#md:installation"><span>Installation</span></a></li>
<li><a href="#md:packaging"><span>Packaging</span></a></li>
<li>
<ul>
<li><a href="#md:usage-universal-module-definition-umd"><span>Usage <wbr/>Universal <wbr/>Module <wbr/>Definition (UMD)</span></a></li></ul></li>
<li><a href="#md:getting-started"><span>Getting started</span></a></li>
<li><a href="#md:extended-usage"><span>Extended usage</span></a></li>
<li>
<ul>
<li><a href="#md:iin-details"><span>IIN details</span></a></li>
<li><a href="#md:payment-product-specifics"><span>Payment product specifics</span></a></li>
<li>
<ul>
<li><a href="#md:apple-pay"><span>Apple <wbr/>Pay</span></a></li>
<li><a href="#md:google-pay"><span>Google <wbr/>Pay</span></a></li>
<li><a href="#md:bancontact"><span>Bancontact</span></a></li></ul></li>
<li><a href="#md:masking-field-values"><span>Masking field values</span></a></li>
<li><a href="#md:accounts-on-file-tokens"><span>Accounts on file (tokens)</span></a></li>
<li><a href="#md:server-side-rendering-support"><span>Server-<wbr/>side rendering support</span></a></li>
<li><a href="#md:non-browser-support"><span>Non-<wbr/>browser support</span></a></li></ul></li>
<li><a href="#md:api"><span>API</span></a></li>
<li>
<ul>
<li><a href="#md:differences-from-the-worldline-connect-client-api"><span>Differences from the <wbr/>Worldline <wbr/>Connect <wbr/>Client API</span></a></li></ul></li>
<li><a href="#md:requirements"><span>Requirements</span></a></li>
<li>
<ul>
<li><a href="#md:browsers"><span>Browsers</span></a></li>
<li><a href="#md:nodejs"><span>Node.js</span></a></li></ul></li>
<li><a href="#md:building-the-repository"><span>Building the repository</span></a></li>
<li><a href="#md:testing"><span>Testing</span></a></li></ul></li></ul></li></ul></div></details></div>
<div class="site-menu">
<nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-4"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-namespace)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.33 16V7.24H10.77L13.446 14.74C13.43 14.54 13.41 14.296 13.386 14.008C13.37 13.712 13.354 13.404 13.338 13.084C13.33 12.756 13.326 12.448 13.326 12.16V7.24H14.37V16H12.93L10.266 8.5C10.282 8.692 10.298 8.936 10.314 9.232C10.33 9.52 10.342 9.828 10.35 10.156C10.366 10.476 10.374 10.784 10.374 11.08V16H9.33Z" fill="var(--color-text)"></path></g></svg><span>Worldline <wbr/>Connect client SDK</span></a>
<ul class="tsd-small-nested-navigation">
<li><a href="modules/Session.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>Session</span></a></li>
<li><a href="modules/communicator_model.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>communicator/model</span></a></li>
<li><a href="modules/ext.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext</span></a></li>
<li><a href="modules/ext_crypto.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/crypto</span></a></li>
<li><a href="modules/ext_http.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/http</span></a></li>
<li><a href="modules/ext_http_util.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/http/util</span></a></li>
<li><a href="modules/ext_impl_browser.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/impl/browser</span></a></li>
<li><a href="modules/ext_impl_crypto_WebCrypto.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/impl/crypto/<wbr/>Web<wbr/>Crypto</span></a></li>
<li><a href="modules/ext_impl_crypto_forge.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/impl/crypto/forge</span></a></li>
<li><a href="modules/ext_impl_http_fetch.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/impl/http/fetch</span></a></li>
<li><a href="modules/ext_impl_http_xhr.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>ext/impl/http/xhr</span></a></li>
<li><a href="modules/index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>index</span></a></li>
<li><a href="modules/index_forge.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>index.forge</span></a></li>
<li><a href="modules/model.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>model</span></a></li></ul></nav></div></div></div>
<div class="overlay"></div></body></html>